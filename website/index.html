<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Campus Point - Sistem poin kampus berbasis blockchain">
    <title>Campus Point | Blockchain-Based Campus Reward System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <span class="logo-icon">‚óÜ</span>
                    <span class="logo-text">Campus Point</span>
                </div>
            </div>
            <nav class="nav-menu">
                <a href="#dashboard" class="nav-item active" data-page="dashboard">
                    <span class="nav-icon">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="#activities" class="nav-item" data-page="activities">
                    <span class="nav-icon">üìã</span>
                    <span>Kegiatan</span>
                </a>
                <a href="#certificates" class="nav-item" data-page="certificates">
                    <span class="nav-icon">üéñÔ∏è</span>
                    <span>Sertifikat</span>
                </a>
                <a href="#admin" class="nav-item" data-page="admin">
                    <span class="nav-icon">‚öôÔ∏è</span>
                    <span>Admin Panel</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <div class="network-badge" id="sidebarNetwork">
                    <span class="network-dot"></span>
                    <span id="sidebarNetworkName">Ganache Local</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title" id="pageTitle">Dashboard</h1>
                </div>
                <div class="header-right">
                    <!-- Wallet Info Display -->
                    <div class="wallet-info" id="walletInfo" style="display: none;">
                        <div class="wallet-address">
                            <span class="wallet-label">Address:</span>
                            <span class="wallet-value" id="displayAddress">-</span>
                        </div>
                        <div class="wallet-network">
                            <span class="network-indicator" id="networkIndicator"></span>
                            <span id="displayNetwork">-</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" id="connectWallet">
                        <span class="btn-icon">üîó</span>
                        <span id="walletButtonText">Connect Wallet</span>
                    </button>
                </div>
            </header>

            <!-- Page Content Container -->
            <div class="page-container" id="pageContainer">
                <!-- Dashboard Page -->
                <div class="page active" id="dashboardPage">
                    <div class="welcome-section">
                        <h2>Selamat Datang di Campus Point</h2>
                        <p>Sistem reward berbasis blockchain untuk kegiatan kampus Anda</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-info">
                                <span class="stat-label">Total Points</span>
                                <span class="stat-value" id="pointBalance">0</span>
                                <span class="stat-change">CPNT Balance</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-info">
                                <span class="stat-label">Certificates Owned</span>
                                <span class="stat-value" id="certCount">0</span>
                                <span class="stat-change">NFT Sertifikat</span>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-info">
                                <span class="stat-label">Active Events</span>
                                <span class="stat-value" id="activityCount">0</span>
                                <span class="stat-change">Kegiatan Berlangsung</span>
                            </div>
                        </div>
                    </div>

                    <div class="recent-section">
                        <h3>Aktivitas Terbaru</h3>
                        <div class="activity-list" id="recentActivity">
                            <div class="empty-state">
                                <p>Belum ada aktivitas. Hubungkan wallet untuk melihat data Anda.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activities Page -->
                <div class="page" id="activitiesPage">
                    <div class="page-header">
                        <h2>Daftar Kegiatan Kampus</h2>
                        <p>Ikuti kegiatan dan dapatkan poin CPNT</p>
                    </div>
                    <div class="activities-grid" id="activitiesList">
                        <div class="empty-state">
                            <p>Memuat kegiatan...</p>
                        </div>
                    </div>
                </div>

                <!-- Certificates Page -->
                <div class="page" id="certificatesPage">
                    <div class="page-header">
                        <h2>Koleksi Sertifikat NFT</h2>
                        <p>Sertifikat digital Anda yang tersimpan di blockchain</p>
                    </div>

                    <!-- Token Verification Section -->
                    <div class="verify-section">
                        <h3>Verifikasi Sertifikat</h3>
                        <p>Masukkan Token ID untuk melihat pemilik dan metadata sertifikat</p>
                        <form id="verifyTokenForm" class="form verify-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="verifyTokenId">Token ID</label>
                                    <input type="number" id="verifyTokenId" placeholder="1" min="1" required>
                                </div>
                                <button type="submit" class="btn btn-secondary">Verifikasi</button>
                            </div>
                        </form>
                        <div class="verify-result" id="verifyResult" style="display: none;">
                            <div class="verify-info">
                                <p><strong>Token ID:</strong> <span id="resultTokenId">-</span></p>
                                <p><strong>Owner:</strong> <span id="resultOwner">-</span></p>
                                <p><strong>Token URI:</strong> <span id="resultTokenUri">-</span></p>
                            </div>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Claim Certificate Section -->
                    <div class="claim-section">
                        <h3>Klaim Sertifikat</h3>
                        <p>Klaim sertifikat untuk kegiatan yang telah Anda ikuti</p>
                        <div class="claimable-list" id="claimableList">
                            <div class="empty-state">
                                <p>Hubungkan wallet untuk melihat sertifikat yang bisa diklaim.</p>
                            </div>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <h3>Koleksi Sertifikat Anda</h3>
                    <div class="certificates-grid" id="certificatesList">
                        <div class="empty-state">
                            <p>Belum ada sertifikat. Hubungkan wallet untuk melihat koleksi Anda.</p>
                        </div>
                    </div>
                </div>

                <!-- Admin Page -->
                <div class="page" id="adminPage">
                    <div class="page-header">
                        <h2>Panel Admin</h2>
                        <p>Kelola kegiatan dan berikan reward ke mahasiswa</p>
                    </div>

                    <div class="admin-sections">
                        <!-- Waiting List Section -->
                        <div class="admin-card waiting-list-card">
                            <h3>üîî Waiting List Sertifikat</h3>
                            <p>Request sertifikat dari mahasiswa yang menunggu persetujuan</p>
                            <div id="waitingListContainer">
                                <div class="empty-state">
                                    <p>Memuat waiting list...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Create Activity -->
                        <div class="admin-card">
                            <h3>Buat Kegiatan Baru</h3>
                            <form id="createActivityForm" class="form">
                                <div class="form-group">
                                    <label for="activityName">Nama Kegiatan</label>
                                    <input type="text" id="activityName" placeholder="Contoh: Seminar AI" required>
                                </div>
                                <div class="form-group">
                                    <label for="pointReward">Poin Reward</label>
                                    <input type="number" id="pointReward" placeholder="100" min="1" required>
                                </div>
                                <button type="submit" class="btn btn-primary">Buat Kegiatan</button>
                            </form>
                        </div>

                        <!-- Set Certificate URI Template -->
                        <div class="admin-card">
                            <h3>Set Template Sertifikat</h3>
                            <form id="setCertUriForm" class="form">
                                <div class="form-group">
                                    <label for="certUriActivityId">ID Kegiatan</label>
                                    <input type="number" id="certUriActivityId" placeholder="1" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="certTemplateUri">IPFS URI Template Sertifikat</label>
                                    <input type="text" id="certTemplateUri" placeholder="ipfs://..." required>
                                </div>
                                <button type="submit" class="btn btn-primary">Set Template</button>
                            </form>
                        </div>

                        <!-- Reward Student -->
                        <div class="admin-card">
                            <h3>Berikan Poin ke Mahasiswa</h3>
                            <form id="rewardStudentForm" class="form">
                                <div class="form-group">
                                    <label for="rewardActivityId">ID Kegiatan</label>
                                    <input type="number" id="rewardActivityId" placeholder="1" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="studentAddress">Alamat Wallet Mahasiswa</label>
                                    <input type="text" id="studentAddress" placeholder="0x..." required>
                                </div>
                                <button type="submit" class="btn btn-primary">Kirim Poin</button>
                            </form>
                        </div>

                        <!-- Mint Certificate -->
                        <div class="admin-card">
                            <h3>Terbitkan Sertifikat NFT</h3>
                            <form id="mintCertificateForm" class="form">
                                <div class="form-group">
                                    <label for="certActivityId">ID Kegiatan</label>
                                    <input type="number" id="certActivityId" placeholder="1" min="1" required>
                                </div>
                                <div class="form-group">
                                    <label for="certStudentAddress">Alamat Wallet Mahasiswa</label>
                                    <input type="text" id="certStudentAddress" placeholder="0x..." required>
                                </div>
                                <div class="form-group">
                                    <label for="certUri">IPFS URI (Metadata)</label>
                                    <input type="text" id="certUri" placeholder="ipfs://..." required>
                                </div>

                                <!-- Certificate Preview Section -->
                                <div class="cert-preview-section" id="certPreviewSection" style="display: none;">
                                    <label>Preview Sertifikat</label>
                                    <div class="cert-preview-container">
                                        <img id="certPreviewImage" src="" alt="Certificate Preview">
                                        <div class="cert-preview-info" id="certPreviewInfo"></div>
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" id="previewCertBtn">Preview</button>
                                    <button type="submit" class="btn btn-primary" id="mintCertBtn" disabled>Terbitkan
                                        Sertifikat</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Modal -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal" id="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Modal Title</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="js/contracts.js"></script>
    <script src="js/web3-utils.js"></script>
    <script src="js/app.js"></script>
</body>

</html>